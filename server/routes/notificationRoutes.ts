/**\n * Notification API Routes\n */\n\nimport { Router, Request, Response } from 'express';\nimport notificationService from '../services/notificationSystemService.js';\nimport authMiddleware from '../middleware/authMiddleware.js';\n\nconst router = Router();\n\n/**\n * GET /notifications\n * Get user notifications\n */\nrouter.get('/', authMiddleware, async (req: Request, res: Response) => {\n  try {\n    const userId = req.user?.id;\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const limit = parseInt(req.query.limit as string) || 20;\n    const notifications = await notificationService.getUserNotifications(userId, limit);\n\n    res.json(notifications);\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to get notifications' });\n  }\n});\n\n/**\n * GET /notifications/unread\n * Get unread notification count\n */\nrouter.get('/unread', authMiddleware, async (req: Request, res: Response) => {\n  try {\n    const userId = req.user?.id;\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const count = await notificationService.getUnreadCount(userId);\n    res.json({ unread: count });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to get unread count' });\n  }\n});\n\n/**\n * PUT /notifications/:id/read\n * Mark notification as read\n */\nrouter.put('/:id/read', authMiddleware, async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const success = await notificationService.markAsRead(id);\n\n    if (!success) {\n      return res.status(500).json({ error: 'Failed to mark notification as read' });\n    }\n\n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to mark notification as read' });\n  }\n});\n\n/**\n * PUT /notifications/read-all\n * Mark all notifications as read\n */\nrouter.put('/read-all', authMiddleware, async (req: Request, res: Response) => {\n  try {\n    const userId = req.user?.id;\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const success = await notificationService.markAllAsRead(userId);\n\n    if (!success) {\n      return res.status(500).json({ error: 'Failed to mark all notifications as read' });\n    }\n\n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to mark all notifications as read' });\n  }\n});\n\n/**\n * DELETE /notifications/:id\n * Delete notification\n */\nrouter.delete('/:id', authMiddleware, async (req: Request, res: Response) => {\n  try {\n    const { id } = req.params;\n    const success = await notificationService.deleteNotification(id);\n\n    if (!success) {\n      return res.status(500).json({ error: 'Failed to delete notification' });\n    }\n\n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: 'Failed to delete notification' });\n  }\n});\n\nexport default router;\n
