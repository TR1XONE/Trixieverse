import React, { useState, useEffect } from 'react';\nimport { Users, Heart, Trophy, MessageSquare } from 'lucide-react';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface Friend {\n  id: string;\n  username: string;\n  currentRank: string;\n  isOnline: boolean;\n}\n\ninterface CoachingCircle {\n  id: string;\n  name: string;\n  description: string;\n  memberCount: number;\n  createdBy: string;\n}\n\nexport default function SocialPage() {\n  const { t } = useLanguage();\n  const [activeTab, setActiveTab] = useState<'friends' | 'circles' | 'tournaments'>('friends');\n  const [friends, setFriends] = useState<Friend[]>([]);\n  const [circles, setCircles] = useState<CoachingCircle[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [newCircleName, setNewCircleName] = useState('');\n  const [newCircleDescription, setNewCircleDescription] = useState('');\n\n  useEffect(() => {\n    fetchSocialData();\n  }, [activeTab]);\n\n  const fetchSocialData = async () => {\n    try {\n      setLoading(true);\n\n      if (activeTab === 'friends') {\n        const res = await fetch('/api/social/friends');\n        const data = await res.json();\n        setFriends(data);\n      } else if (activeTab === 'circles') {\n        const res = await fetch('/api/social/circles');\n        const data = await res.json();\n        setCircles(data);\n      }\n    } catch (error) {\n      console.error('Failed to fetch social data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateCircle = async () => {\n    if (!newCircleName.trim()) return;\n\n    try {\n      const res = await fetch('/api/social/circles', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          name: newCircleName,\n          description: newCircleDescription,\n          isPublic: false,\n        }),\n      });\n\n      if (res.ok) {\n        setNewCircleName('');\n        setNewCircleDescription('');\n        fetchSocialData();\n      }\n    } catch (error) {\n      console.error('Failed to create circle:', error);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900 p-6 scanlines\">\n      {/* Background effects */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl\"></div>\n      </div>\n\n      <div className=\"relative max-w-6xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <Users className=\"w-8 h-8 text-cyan-400\" />\n            <h1 className=\"text-4xl font-bold text-cyan-400 uppercase tracking-widest\">\n              COMMUNITY\n            </h1>\n          </div>\n          <p className=\"text-muted-foreground uppercase tracking-wider text-sm\">\n            Connect with other players and grow together\n          </p>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex gap-3 mb-8 border-b border-cyan-500/30\">\n          {(['friends', 'circles', 'tournaments'] as const).map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`px-6 py-3 font-bold uppercase tracking-wider transition-all border-b-2 ${\n                activeTab === tab\n                  ? 'border-cyan-400 text-cyan-400'\n                  : 'border-transparent text-muted-foreground hover:text-cyan-400'\n              }`}\n            >\n              {tab === 'friends' ? 'üë• Friends' : tab === 'circles' ? 'üéØ Coaching Circles' : 'üèÜ Tournaments'}\n            </button>\n          ))}\n        </div>\n\n        {/* Friends Tab */}\n        {activeTab === 'friends' && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {loading ? (\n              <div className=\"col-span-full text-center text-cyan-400\">Loading friends...</div>\n            ) : friends.length === 0 ? (\n              <div className=\"col-span-full text-center text-muted-foreground p-8\">\n                No friends yet. Add friends to see their progress!\n              </div>\n            ) : (\n              friends.map((friend) => (\n                <div\n                  key={friend.id}\n                  className=\"coaching-card p-4 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\"\n                >\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <h3 className=\"font-bold text-cyan-400\">{friend.username}</h3>\n                      <p className=\"text-xs text-muted-foreground\">{friend.currentRank}</p>\n                    </div>\n                    <div className={`w-3 h-3 rounded-full ${\n                      friend.isOnline ? 'bg-green-400' : 'bg-gray-500'\n                    }`}></div>\n                  </div>\n                  <button className=\"w-full gaming-button text-sm\">\n                    VIEW PROFILE\n                  </button>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* Coaching Circles Tab */}\n        {activeTab === 'circles' && (\n          <div>\n            {/* Create Circle Form */}\n            <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-purple-500/30 neon-glow mb-8\">\n              <h2 className=\"text-xl font-bold text-purple-400 uppercase tracking-wider mb-4\">\n                CREATE NEW CIRCLE\n              </h2>\n              <div className=\"space-y-3\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Circle name\"\n                  value={newCircleName}\n                  onChange={(e) => setNewCircleName(e.target.value)}\n                  className=\"w-full px-4 py-2 rounded-sm bg-slate-900/50 border border-purple-500/30 text-foreground placeholder-muted-foreground focus:outline-none focus:border-purple-500/60\"\n                />\n                <textarea\n                  placeholder=\"Description\"\n                  value={newCircleDescription}\n                  onChange={(e) => setNewCircleDescription(e.target.value)}\n                  className=\"w-full px-4 py-2 rounded-sm bg-slate-900/50 border border-purple-500/30 text-foreground placeholder-muted-foreground focus:outline-none focus:border-purple-500/60 resize-none\"\n                  rows={3}\n                />\n                <button\n                  onClick={handleCreateCircle}\n                  className=\"w-full gaming-button bg-purple-600 hover:bg-purple-700\"\n                >\n                  CREATE CIRCLE\n                </button>\n              </div>\n            </div>\n\n            {/* Circles List */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {loading ? (\n                <div className=\"col-span-full text-center text-cyan-400\">Loading circles...</div>\n              ) : circles.length === 0 ? (\n                <div className=\"col-span-full text-center text-muted-foreground p-8\">\n                  No coaching circles yet. Create one to get started!\n                </div>\n              ) : (\n                circles.map((circle) => (\n                  <div\n                    key={circle.id}\n                    className=\"coaching-card p-4 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\"\n                  >\n                    <h3 className=\"font-bold text-cyan-400 mb-2\">{circle.name}</h3>\n                    <p className=\"text-sm text-muted-foreground mb-3\">{circle.description}</p>\n                    <div className=\"flex items-center justify-between text-xs text-muted-foreground mb-3\">\n                      <span>Created by: {circle.createdBy}</span>\n                      <span>üë• {circle.memberCount} members</span>\n                    </div>\n                    <button className=\"w-full gaming-button text-sm\">\n                      VIEW CIRCLE\n                    </button>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Tournaments Tab */}\n        {activeTab === 'tournaments' && (\n          <div className=\"text-center p-8 text-muted-foreground\">\n            <Trophy className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n            <p>Tournaments coming soon! üèÜ</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n
