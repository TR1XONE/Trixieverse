import React, { useState, useEffect } from 'react';\nimport { BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport { Users, Activity, TrendingUp, AlertCircle, Settings, LogOut } from 'lucide-react';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface DashboardStats {\n  totalUsers: number;\n  activeUsers: number;\n  totalMatches: number;\n  averageWinRate: number;\n  totalAchievements: number;\n  topPlayers: any[];\n}\n\nexport default function AdminDashboardPage() {\n  const { t } = useLanguage();\n  const [stats, setStats] = useState<DashboardStats | null>(null);\n  const [analyticsData, setAnalyticsData] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState<'overview' | 'users' | 'reports' | 'health'>('overview');\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [activeTab]);\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n\n      if (activeTab === 'overview') {\n        const res = await fetch('/api/admin/dashboard');\n        const data = await res.json();\n        setStats(data);\n\n        const analyticsRes = await fetch('/api/admin/analytics?days=30');\n        const analyticsData = await analyticsRes.json();\n        setAnalyticsData(analyticsData.dailyActiveUsers || []);\n      }\n    } catch (error) {\n      console.error('Failed to fetch admin data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const COLORS = ['#00d4ff', '#8b5cf6', '#06b6d4', '#0ea5e9'];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900 p-6 scanlines\">\n      {/* Background effects */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-3xl\"></div>\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl\"></div>\n      </div>\n\n      <div className=\"relative max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8 flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-4xl font-bold text-red-400 uppercase tracking-widest mb-2\">\n              ‚öôÔ∏è ADMIN PANEL\n            </h1>\n            <p className=\"text-muted-foreground uppercase tracking-wider text-sm\">\n              System Management & Analytics\n            </p>\n          </div>\n          <button className=\"gaming-button bg-red-600 hover:bg-red-700 flex items-center gap-2\">\n            <LogOut className=\"w-4 h-4\" />\n            LOGOUT\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex gap-3 mb-8 border-b border-red-500/30\">\n          {(['overview', 'users', 'reports', 'health'] as const).map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`px-6 py-3 font-bold uppercase tracking-wider transition-all border-b-2 ${\n                activeTab === tab\n                  ? 'border-red-400 text-red-400'\n                  : 'border-transparent text-muted-foreground hover:text-red-400'\n              }`}\n            >\n              {tab === 'overview' ? 'üìä Overview' : tab === 'users' ? 'üë• Users' : tab === 'reports' ? 'üö® Reports' : 'üè• Health'}\n            </button>\n          ))}\n        </div>\n\n        {/* Overview Tab */}\n        {activeTab === 'overview' && (\n          <div>\n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n              <div className=\"coaching-card p-4 bg-gradient-to-br from-cyan-500/10 to-cyan-500/5 border border-cyan-500/30 neon-glow\">\n                <div className=\"flex items-center gap-3\">\n                  <Users className=\"w-8 h-8 text-cyan-400\" />\n                  <div>\n                    <p className=\"text-xs text-muted-foreground uppercase\">Total Users</p>\n                    <p className=\"text-2xl font-bold text-cyan-400\">\n                      {loading ? '...' : stats?.totalUsers || 0}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"coaching-card p-4 bg-gradient-to-br from-green-500/10 to-green-500/5 border border-green-500/30 neon-glow\">\n                <div className=\"flex items-center gap-3\">\n                  <Activity className=\"w-8 h-8 text-green-400\" />\n                  <div>\n                    <p className=\"text-xs text-muted-foreground uppercase\">Active Users</p>\n                    <p className=\"text-2xl font-bold text-green-400\">\n                      {loading ? '...' : stats?.activeUsers || 0}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"coaching-card p-4 bg-gradient-to-br from-purple-500/10 to-purple-500/5 border border-purple-500/30 neon-glow\">\n                <div className=\"flex items-center gap-3\">\n                  <TrendingUp className=\"w-8 h-8 text-purple-400\" />\n                  <div>\n                    <p className=\"text-xs text-muted-foreground uppercase\">Total Matches</p>\n                    <p className=\"text-2xl font-bold text-purple-400\">\n                      {loading ? '...' : stats?.totalMatches || 0}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"coaching-card p-4 bg-gradient-to-br from-orange-500/10 to-orange-500/5 border border-orange-500/30 neon-glow\">\n                <div className=\"flex items-center gap-3\">\n                  <AlertCircle className=\"w-8 h-8 text-orange-400\" />\n                  <div>\n                    <p className=\"text-xs text-muted-foreground uppercase\">Avg Win Rate</p>\n                    <p className=\"text-2xl font-bold text-orange-400\">\n                      {loading ? '...' : `${(stats?.averageWinRate || 0).toFixed(1)}%`}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Charts */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n              {/* Daily Active Users */}\n              <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\">\n                <h2 className=\"text-xl font-bold text-cyan-400 uppercase tracking-wider mb-4\">\n                  DAILY ACTIVE USERS\n                </h2>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={analyticsData}>\n                    <CartesianGrid stroke=\"#00d4ff30\" />\n                    <XAxis dataKey=\"date\" stroke=\"#00d4ff\" />\n                    <YAxis stroke=\"#00d4ff\" />\n                    <Tooltip contentStyle={{ backgroundColor: '#0a0e27', border: '1px solid #00d4ff' }} />\n                    <Line type=\"monotone\" dataKey=\"users\" stroke=\"#00d4ff\" strokeWidth={2} />\n                  </LineChart>\n                </ResponsiveContainer>\n              </div>\n\n              {/* Top Players */}\n              <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\">\n                <h2 className=\"text-xl font-bold text-cyan-400 uppercase tracking-wider mb-4\">\n                  TOP PLAYERS\n                </h2>\n                <div className=\"space-y-3\">\n                  {loading ? (\n                    <p className=\"text-muted-foreground\">Loading...</p>\n                  ) : (\n                    stats?.topPlayers.slice(0, 5).map((player, idx) => (\n                      <div key={idx} className=\"flex items-center justify-between p-3 rounded-sm bg-cyan-500/10 border border-cyan-500/20\">\n                        <div>\n                          <p className=\"font-bold text-cyan-400\">#{idx + 1} {player.username}</p>\n                          <p className=\"text-xs text-muted-foreground\">{player.matches} matches</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-bold text-green-400\">{player.win_rate?.toFixed(1)}%</p>\n                          <p className=\"text-xs text-muted-foreground\">Win Rate</p>\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Users Tab */}\n        {activeTab === 'users' && (\n          <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\">\n            <h2 className=\"text-xl font-bold text-cyan-400 uppercase tracking-wider mb-4\">\n              USER MANAGEMENT\n            </h2>\n            <p className=\"text-muted-foreground\">User management interface coming soon...</p>\n          </div>\n        )}\n\n        {/* Reports Tab */}\n        {activeTab === 'reports' && (\n          <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\">\n            <h2 className=\"text-xl font-bold text-cyan-400 uppercase tracking-wider mb-4\">\n              REPORTED CONTENT\n            </h2>\n            <p className=\"text-muted-foreground\">Reports management interface coming soon...</p>\n          </div>\n        )}\n\n        {/* Health Tab */}\n        {activeTab === 'health' && (\n          <div className=\"coaching-card p-6 bg-gradient-to-br from-slate-900/80 to-blue-900/40 border-2 border-cyan-500/30 neon-glow\">\n            <h2 className=\"text-xl font-bold text-cyan-400 uppercase tracking-wider mb-4\">\n              SYSTEM HEALTH\n            </h2>\n            <p className=\"text-muted-foreground\">System health monitoring coming soon...</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n
