# ðŸš€ TrixieVerse Deployment Guide\n\n## Production Deployment\n\n### Prerequisites\n- Docker & Docker Compose\n- Node.js 22+\n- PostgreSQL 16+\n- Redis 7+\n- Git\n\n### Environment Variables\n\nCreate a `.env.production` file:\n\n```env\nNODE_ENV=production\nDATABASE_URL=postgresql://user:password@host:5432/trixieverse\nREDIS_URL=redis://host:6379\nJWT_SECRET=your-secret-key-here\nFRONTEND_URL=https://trixieverse.com\nRIOT_API_KEY=your-riot-api-key\nSMTP_HOST=smtp.gmail.com\nSMTP_PORT=587\nSMTP_USER=your-email@gmail.com\nSMTP_PASS=your-app-password\n```\n\n### Local Development\n\n```bash\n# Start all services\ndocker-compose up -d\n\n# Run migrations\ndocker-compose exec backend pnpm run migrate\n\n# Seed database (optional)\ndocker-compose exec backend pnpm run seed\n\n# View logs\ndocker-compose logs -f backend\n\n# Stop services\ndocker-compose down\n```\n\n### Production Deployment (Railway/Vercel)\n\n#### Option 1: Railway\n\n1. Connect your GitHub repository to Railway\n2. Set environment variables in Railway dashboard\n3. Deploy:\n   ```bash\n   railway up\n   ```\n\n#### Option 2: Vercel (Frontend) + Railway (Backend)\n\n**Frontend (Vercel):**\n```bash\nvercel deploy\n```\n\n**Backend (Railway):**\n```bash\nrailway up\n```\n\n#### Option 3: Self-hosted (VPS)\n\n1. SSH into your server:\n   ```bash\n   ssh user@your-server.com\n   ```\n\n2. Clone repository:\n   ```bash\n   git clone https://github.com/yourusername/trixieverse.git\n   cd trixieverse\n   ```\n\n3. Setup environment:\n   ```bash\n   cp .env.production.example .env.production\n   # Edit .env.production with your values\n   ```\n\n4. Build and deploy:\n   ```bash\n   docker-compose -f docker-compose.prod.yml up -d\n   ```\n\n5. Setup SSL (Let's Encrypt):\n   ```bash\n   docker-compose exec nginx certbot certonly --webroot -w /var/www/certbot -d trixieverse.com\n   ```\n\n### Database Migrations\n\n```bash\n# Run migrations\npnpm run migrate\n\n# Rollback last migration\npnpm run migrate:rollback\n\n# Create new migration\npnpm run migrate:create --name migration_name\n```\n\n### Monitoring\n\n#### Health Check\n```bash\ncurl http://localhost:3000/api/health\n```\n\n#### Performance Metrics\n```bash\ncurl http://localhost:3000/api/admin/health\n```\n\n#### Logs\n```bash\n# View application logs\ndocker-compose logs -f backend\n\n# View database logs\ndocker-compose logs -f postgres\n```\n\n### Scaling\n\n#### Horizontal Scaling (Multiple Instances)\n\n1. Update docker-compose:\n   ```yaml\n   backend:\n     deploy:\n       replicas: 3\n   ```\n\n2. Setup load balancer (Nginx/HAProxy)\n\n#### Database Optimization\n\n1. Enable connection pooling (PgBouncer):\n   ```bash\n   docker run -d --name pgbouncer pgbouncer\n   ```\n\n2. Setup read replicas for scaling reads\n\n3. Enable Redis caching\n\n### Backup & Recovery\n\n#### Database Backup\n```bash\n# Backup\ndocker-compose exec postgres pg_dump -U trixieverse trixieverse > backup.sql\n\n# Restore\ncat backup.sql | docker-compose exec -T postgres psql -U trixieverse trixieverse\n```\n\n#### Automated Backups\n```bash\n# Add to crontab\n0 2 * * * docker-compose exec postgres pg_dump -U trixieverse trixieverse > /backups/trixieverse-$(date +\\%Y-\\%m-\\%d).sql\n```\n\n### Security\n\n1. **SSL/TLS**: Use Let's Encrypt\n2. **Firewall**: Restrict access to ports\n3. **Database**: Use strong passwords\n4. **API Keys**: Rotate regularly\n5. **Secrets**: Use environment variables\n6. **Rate Limiting**: Enabled by default\n7. **CORS**: Configure for your domain\n\n### Troubleshooting\n\n#### Database Connection Issues\n```bash\n# Check connection\ndocker-compose exec postgres psql -U trixieverse -d trixieverse -c \"SELECT 1\"\n\n# Check logs\ndocker-compose logs postgres\n```\n\n#### High Memory Usage\n```bash\n# Check cache size\ncurl http://localhost:3000/api/admin/cache/stats\n\n# Clear cache\ncurl -X POST http://localhost:3000/api/admin/cache/clear\n```\n\n#### Slow Queries\n```bash\n# Enable query logging\nDATABASE_LOG_QUERIES=true docker-compose up\n\n# Check slow query log\ndocker-compose exec postgres tail -f /var/log/postgresql/slow.log\n```\n\n### Performance Optimization\n\n1. **Caching**: Redis is enabled\n2. **CDN**: Serve static assets from CDN\n3. **Database**: Add indexes for frequently queried columns\n4. **Compression**: Enable gzip compression\n5. **Minification**: Frontend assets are minified\n\n### Monitoring & Alerts\n\n#### Setup Monitoring\n\n1. **Datadog**:\n   ```bash\n   DD_AGENT_MAJOR_VERSION=7 docker-compose up\n   ```\n\n2. **New Relic**:\n   ```bash\n   NEW_RELIC_LICENSE_KEY=xxx docker-compose up\n   ```\n\n3. **Prometheus**:\n   ```bash\n   docker-compose -f docker-compose.monitoring.yml up\n   ```\n\n### CI/CD Pipeline\n\nThe GitHub Actions workflow automatically:\n- Runs tests\n- Lints code\n- Builds Docker image\n- Pushes to registry\n- Deploys to production\n\nSee `.github/workflows/deploy.yml` for details.\n\n### Support\n\nFor issues or questions:\n- GitHub Issues: https://github.com/yourusername/trixieverse/issues\n- Email: support@trixieverse.com\n- Discord: https://discord.gg/trixieverse\n
